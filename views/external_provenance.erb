<?xml version="1.0" encoding="UTF-8"?>
<premis xmlns="info:lc/xmlns/premis-v2" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="2.0">
  <agent>
    <agentIdentifier>
      <agentIdentifierType>URI</agentIdentifierType>
      <agentIdentifierValue>http://daitss/external_provenance_extraction</agentIdentifierValue>
    </agentIdentifier>
    <agentName>External Provenance Extractor</agentName>
    <agentType>Web Service</agentType>
  </agent>

  <event>
    <eventIdentifier>
      <eventIdentifierType>Temporary Local</eventIdentifierType>
      <eventIdentifierValue>1</eventIdentifierValue>
    </eventIdentifier>
    <eventType>External Provenance Extraction</eventType>
    <eventDateTime><%= Time.now.xmlschema.xmlschema %></eventDateTime>
    <eventOutcomeInformation>
      <eventOutcome>
      <% if @external_p["events"].length > 0 and @external_p["agents"].length > 0 %>
        success
      <% else %>
        failure
      <% end %>
      </eventOutcome>
    </eventOutcomeInformation>
    <linkingAgentIdentifier>
      <linkingAgentIdentifierType>URI</linkingAgentIdentifierType>
      <linkingAgentIdentifierValue>http://daitss/external_provenance_extraction</linkingAgentIdentifierValue>
    </linkingAgentIdentifier>
    <linkingObjectIdentifier>
      <linkingObjectIdentifierType>URI</linkingObjectIdentifierType>
      <linkingObjectIdentifierValue>
        <%= @location %>
      </linkingObjectIdentifierValue>
    </linkingObjectIdentifier>
  </event>

<% @external_p["events"].each do |event| %>
  <%= event.to_s %>
<% end %>

<% @external_p["agents"].each do |agent| %>
  <%= agent.to_s %>
<% end %>

</premis>
